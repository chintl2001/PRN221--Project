@page
@model Final_Project.Pages.Admin.ProductListModel
@using Final_Project.Models;
@{
    Layout = "_AdminLayout";
}
    <div class="content">
        <div class="page-header">
            <div class="page-title">
                <h4>Product List</h4>
                <h6>Manage products</h6>
            </div>
            <div class="page-btn">
                <a asp-page="AddProduct" class="btn btn-added">
                    <img src="../adminassets/img/icons/plus.svg" alt="img"
                         class="me-1">Add New Product
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="table-top">
                    <div class="search-set">
                        <div class="search-path">
                            <a class="btn btn-filter" id="filter_search">
                                <img src="../adminassets/img/icons/filter.svg" alt="img">
                                <span><img src="../adminassets/img/icons/closes.svg" alt="img"></span>
                            </a>
                        </div>
                        <div class="search-input">
                            <a class="btn btn-searchset">
                                <img src="../adminassets/img/icons/search-white.svg"
                                     alt="img">
                            </a>
                        </div>
                    </div>
                    <div class="wordset">
                        <ul>
                            <li>
                                <a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf">
                                    <img src="../adminassets/img/icons/pdf.svg" alt="img">
                                </a>
                            </li>
                            <li>
                                <a data-bs-toggle="tooltip" data-bs-placement="top" title="excel">
                                    <img src="../adminassets/img/icons/excel.svg" alt="img">
                                </a>
                            </li>
                            <li>
                                <a data-bs-toggle="tooltip" data-bs-placement="top" title="print">
                                    <img src="../adminassets/img/icons/printer.svg" alt="img">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card mb-0" id="filter_inputs">
                    <div class="card-body pb-0">
                        <div class="row">
                            <div class="col-lg-12 col-sm-12">
                                <form asp-page="ProductList" method="post">
                                <div class="row">
                                    <div class="col-lg col-sm-6 col-12">
                                        <div class="form-group">
                                            <input type="text" value="@Model.SearchText" name="searchText" placeholder="Search text" />
                                        </div>
                                    </div>
                                    <div class="col-lg col-sm-6 col-12">
                                        <div class="form-group">
                                            <select class="select" name="category">
                                                <option value="">Category</option>
                                                @foreach (var category in Model.Categories ?? Enumerable.Empty<Category>())
                                                {
                                                    Category category1 = (Category)category;
                                                    <option value="@category1.Id" selected="@(category1.Id.ToString().Equals( Model.Category))">@category1.Name</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg col-sm-6 col-12 ">
                                        <div class="form-group">
                                            <select class="select" name="price">
                                                <option value="">Price</option>
                                                <option value="ascending" selected="@(Model.Price == "ascending")">Ascending</option>
                                                <option value="descending" selected="@(Model.Price == "descending")">Descending</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-1 col-sm-6 col-12">
                                        <div class="form-group">
                                            <button type="submit">
                                                <a class="btn btn-filters ms-auto">
                                                    <img src="../adminassets/img/icons/search-whites.svg" alt="img">
                                                </a>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                </form>
                                
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table  datanew">
                        <thead>
                            <tr>
                                <th>Product Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Description</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                        @foreach(var product in Model.Products)
                        {
                            Product product1 = (Product)product;
                            <tr>
                                <td class="productimgname">
                                    <a href="javascript:void(0);" class="product-img">
                                        <img src="@product1.Image" alt="product">
                                    </a>
                                    <a href="javascript:void(0);">@product1.Name</a>
                                </td>
                                <td>@product1.Category.Name</td>
                                <td>@product1.Price</td>
                                <td>@product1.Description</td>
                                <td>
                                    <a class="me-3" asp-page="">
                                        <img src="../adminassets/img/icons/eye.svg" alt="img">
                                    </a>
                                    <a class="me-3" asp-page="UpdateProduct" asp-route-id="@product1.Id">
                                        <img src="../adminassets/img/icons/edit.svg" alt="img">
                                    </a>
                                    <a class="confirm-text" asp-page="DeleteProduct" asp-route-id="@product1.Id">
                                        <img src="../adminassets/img/icons/delete.svg" alt="img">
                                    </a>
                                </td>
                            </tr>
                        }
                        
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
